---
import { SITE_CONFIG, NAV_ITEMS } from '../../config';
import { Image } from 'astro:assets';
import MobileMenu from '../interactive/MobileMenu';
import IconHome from '../icons/IconHome.astro';
---

<header
    class="bg-main/50 fixed top-0 z-50 w-full border-b border-white/5 backdrop-blur-md transition-all duration-300"
>
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex h-16 items-center justify-between">
            <!-- Logo -->
            <div class="flex-shrink-0">
                <a href="/" class="group flex items-center gap-3">
                    <div class="relative h-10 w-10">
                        <!-- Avatar (Visible by default, hidden on group-hover) -->
                        <div
                            class="shadow-primary/20 absolute inset-0 overflow-hidden rounded-lg border border-white/10 shadow-lg transition-all duration-300 group-hover:scale-90 group-hover:opacity-0"
                        >
                            <Image
                                src={SITE_CONFIG.avatar}
                                alt={`${SITE_CONFIG.author} Avatar`}
                                class="h-full w-full object-cover"
                                width={32}
                                height={32}
                                loading="eager"
                                fetchpriority="high"
                            />
                        </div>
                        <!-- Home Icon (Hidden by default, visible on group-hover) -->
                        <div
                            class="absolute inset-0 flex scale-90 items-center justify-center rounded-lg border border-white/20 bg-white/10 opacity-0 transition-all duration-300 group-hover:scale-100 group-hover:opacity-100"
                        >
                            <IconHome class="text-accent h-4 w-4" />
                        </div>
                    </div>

                    <div class="flex flex-col">
                        <span
                            class="group-hover:to-accent bg-gradient-to-r from-white to-white/70 bg-clip-text text-xl font-bold text-transparent transition-colors"
                        >
                            {SITE_CONFIG.title}
                        </span>
                    </div>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <nav class="hidden space-x-8 md:flex">
                {
                    NAV_ITEMS.map((item) => {
                        const isActive =
                            Astro.url.pathname === item.path ||
                            (item.path !== '/' && Astro.url.pathname.startsWith(item.path));
                        return (
                            <a
                                href={item.path}
                                class={`group relative py-2 text-sm font-medium transition-colors ${isActive ? 'text-white' : 'text-text-secondary hover:text-white'}`}
                            >
                                {item.name}
                                <span
                                    class={`bg-accent absolute bottom-0 left-0 h-0.5 transition-all duration-300 ${isActive ? 'w-full' : 'w-0 group-hover:w-full'}`}
                                />
                            </a>
                        );
                    })
                }
            </nav>

            <!-- Mobile Menu -->
            <MobileMenu client:media="(max-width: 767px)" currentPath={Astro.url.pathname} />
        </div>
    </div>
</header>
<!-- Spacer for fixed header -->
<div class="h-16"></div>
