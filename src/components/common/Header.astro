---
import { SITE_CONFIG, NAV_ITEMS } from '../../config';
import { Image } from 'astro:assets';
import MobileMenu from '../interactive/MobileMenu';
import IconHome from '../icons/IconHome.astro';
---

<header
    class="fixed top-0 w-full z-50 transition-all duration-300 backdrop-blur-md border-b border-white/5 bg-main/50"
>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Logo -->
            <div class="flex-shrink-0">
                <a href="/" class="group flex items-center gap-3">
                    <div class="relative w-10 h-10">
                        <!-- Avatar (Visible by default, hidden on group-hover) -->
                        <div
                            class="absolute inset-0 rounded-lg overflow-hidden border border-white/10 shadow-lg shadow-primary/20 transition-all duration-300 group-hover:scale-90 group-hover:opacity-0"
                        >
                            <Image
                                src={SITE_CONFIG.avatar}
                                alt={`${SITE_CONFIG.author} Avatar`}
                                class="w-full h-full object-cover"
                                width={32}
                                height={32}
                                loading="eager"
                                fetchpriority="high"
                            />
                        </div>
                        <!-- Home Icon (Hidden by default, visible on group-hover) -->
                        <div
                            class="absolute inset-0 flex items-center justify-center rounded-lg bg-white/10 border border-white/20 opacity-0 scale-90 transition-all duration-300 group-hover:opacity-100 group-hover:scale-100"
                        >
                            <IconHome class="w-4 h-4 text-accent" />
                        </div>
                    </div>

                    <div class="flex flex-col">
                        <span
                            class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/70 group-hover:to-accent transition-colors"
                        >
                            {SITE_CONFIG.title}
                        </span>
                    </div>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <nav class="hidden md:flex space-x-8">
                {
                    NAV_ITEMS.map((item) => {
                        const isActive =
                            Astro.url.pathname === item.path ||
                            (item.path !== '/' && Astro.url.pathname.startsWith(item.path));
                        return (
                            <a
                                href={item.path}
                                class={`relative text-sm font-medium transition-colors py-2 group ${isActive ? 'text-white' : 'text-text-secondary hover:text-white'}`}
                            >
                                {item.name}
                                <span
                                    class={`absolute bottom-0 left-0 h-0.5 bg-accent transition-all duration-300 ${isActive ? 'w-full' : 'w-0 group-hover:w-full'}`}
                                />
                            </a>
                        );
                    })
                }
            </nav>

            <!-- Mobile Menu -->
            <MobileMenu client:media="(max-width: 767px)" currentPath={Astro.url.pathname} />
        </div>
    </div>
</header>
<!-- Spacer for fixed header -->
<div class="h-16"></div>
```
