---
import Layout from '../layouts/Layout.astro';
import { SITE_CONFIG } from '../config';
import GiscusComments from '../components/interactive/GiscusComments';
import IconMail from '../components/icons/IconMail.astro';
---

<Layout title="留言板" nebulaVariant="guestbook">
    <div class="relative z-10 mx-auto max-w-5xl px-4 py-12">
        <div class="mb-12">
            <h1 class="mb-4 flex items-center gap-3 text-4xl font-bold tracking-tight md:text-6xl">
                <span class="text-accent animate-pulse text-5xl">_</span>
                {SITE_CONFIG.ui.guestbook.title}
            </h1>
            <p class="text-text-secondary font-mono text-lg">
                {SITE_CONFIG.ui.guestbook.placeholder}
            </p>
        </div>

        <div class="grid grid-cols-1 gap-12">
            <!-- Email Contact Area (Transparent Terminal Style) -->
            <div
                class="group hover:border-accent/30 relative overflow-hidden rounded-2xl border border-white/10 shadow-2xl backdrop-blur-xl transition-all"
            >
                <div
                    class="bg-surface/40 group-hover:bg-surface/50 absolute inset-0 transition-colors"
                >
                </div>

                <!-- Mac UI Dots -->
                <div
                    class="relative flex items-center justify-between border-b border-white/5 bg-white/5 px-6 py-3 select-none"
                >
                    <div class="flex items-center gap-2">
                        <span class="h-3 w-3 rounded-full bg-[#ff5f56] shadow-[0_0_10px_#ff5f5640]"
                        ></span>
                        <span class="h-3 w-3 rounded-full bg-[#ffbd2e] shadow-[0_0_10px_#ffbd2e40]"
                        ></span>
                        <span class="h-3 w-3 rounded-full bg-[#27c93f] shadow-[0_0_10px_#27c93f40]"
                        ></span>
                    </div>
                    <span class="font-mono text-xs tracking-widest text-white/40 uppercase"
                        >{SITE_CONFIG.ui.guestbook.terminalTitle}</span
                    >
                </div>

                <div class="relative p-6 font-mono text-sm leading-8 text-[#e0e0e0] md:p-8">
                    <!-- Line Numbers & Code -->
                    <div class="table w-full">
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >1</span
                            >
                            <span class="table-cell">
                                <span class="text-purple-400">const</span>
                                <span class="text-yellow-400">sendMail</span> =
                                <span class="text-purple-400">async</span>
                                (<span class="text-blue-400">{`{ message }`}</span>)
                                <span class="text-purple-400">=&gt;</span>
                                {`{`}
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >2</span
                            >
                            <span class="table-cell pl-4">
                                <span class="text-purple-400">await</span>
                                <span class="text-green-400">openMailer</span>({`{`}
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >3</span
                            >
                            <span class="table-cell pl-8">
                                <span class="text-blue-300">to</span>:
                                <span class="text-orange-300">"{SITE_CONFIG.email}"</span>,
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >4</span
                            >
                            <span class="table-cell pl-8">
                                <span class="text-blue-300">subject</span>:
                                <span class="text-orange-300">"来自博客的留言"</span>,
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >5</span
                            >
                            <span class="table-cell pl-4">
                                {`});`}
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >6</span
                            >
                            <span class="table-cell">
                                {`};`}
                            </span>
                        </div>
                        <div class="table-row transition-colors hover:bg-white/5">
                            <span class="table-cell w-12 pr-6 text-right text-white/20 select-none"
                                >7</span
                            >
                            <span class="table-cell text-white/30">
                                // Execute function below
                            </span>
                        </div>
                    </div>
                </div>

                <div class="relative px-6 pb-6 text-right">
                    <a
                        href={`mailto:${SITE_CONFIG.email}?subject=${encodeURIComponent('来自博客的留言')}`}
                        class="bg-primary/20 hover:bg-primary/40 text-primary border-primary/30 group/btn inline-flex items-center gap-2 rounded-lg border px-6 py-2.5 font-sans font-medium shadow-[0_0_20px_-5px_rgba(var(--color-primary),0.3)] transition-all hover:text-white hover:shadow-[0_0_30px_-5px_rgba(var(--color-primary),0.5)]"
                    >
                        <IconMail class="h-4 w-4 transition-transform group-hover/btn:rotate-12" />
                        {SITE_CONFIG.ui.guestbook.runButton}
                    </a>
                </div>
            </div>

            <!-- Giscus Comments (React Component Implementation) -->
            <div class="relative mt-12 space-y-6">
                <h2 class="flex items-center gap-3 text-2xl font-bold text-white/90">
                    <span class="text-accent animate-pulse">#</span>
                    {SITE_CONFIG.ui.guestbook.discussionTitle}
                    <span class="text-text-secondary/70 font-mono text-xs tracking-widest"
                        >{SITE_CONFIG.ui.guestbook.discussionLabel}</span
                    >
                </h2>

                <div
                    class="bg-surface/20 relative min-h-[200px] rounded-3xl border border-white/5 p-6 backdrop-blur-2xl md:p-8"
                >
                    <!-- Decorative Corner -->
                    <div
                        class="absolute top-0 right-0 h-16 w-16 rounded-tr-3xl border-t border-r border-white/10"
                    >
                    </div>
                    <div
                        class="absolute bottom-0 left-0 h-16 w-16 rounded-bl-3xl border-b border-l border-white/10"
                    >
                    </div>

                    <GiscusComments client:only="react" />
                </div>
            </div>
        </div>
    </div>
</Layout>
