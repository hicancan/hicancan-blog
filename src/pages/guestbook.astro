---
import Layout from '../layouts/Layout.astro';
import { SITE_CONFIG } from '../config';
import GiscusComments from '../components/interactive/GiscusComments';
import IconMail from '../components/icons/IconMail.astro';
---

<Layout title="留言板" nebulaVariant="guestbook">
    <div class="max-w-5xl mx-auto px-4 py-12 relative z-10">
        <div class="mb-12">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight flex items-center gap-3">
                <span class="text-accent text-5xl animate-pulse">_</span>
                {SITE_CONFIG.ui.guestbook.title}
            </h1>
            <p class="font-mono text-text-secondary text-lg">
                {SITE_CONFIG.ui.guestbook.placeholder}
            </p>
        </div>

        <div class="grid grid-cols-1 gap-12">
            <!-- Email Contact Area (Transparent Terminal Style) -->
            <div
                class="relative group rounded-2xl overflow-hidden backdrop-blur-xl border border-white/10 shadow-2xl transition-all hover:border-accent/30"
            >
                <div
                    class="absolute inset-0 bg-surface/40 group-hover:bg-surface/50 transition-colors"
                >
                </div>

                <!-- Mac UI Dots -->
                <div
                    class="relative bg-white/5 px-6 py-3 flex items-center justify-between border-b border-white/5 select-none"
                >
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_10px_#ff5f5640]"
                        ></span>
                        <span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_10px_#ffbd2e40]"
                        ></span>
                        <span class="w-3 h-3 rounded-full bg-[#27c93f] shadow-[0_0_10px_#27c93f40]"
                        ></span>
                    </div>
                    <span class="text-white/40 text-xs font-mono tracking-widest uppercase"
                        >{SITE_CONFIG.ui.guestbook.terminalTitle}</span
                    >
                </div>

                <div class="p-6 md:p-8 font-mono text-sm leading-8 relative text-[#e0e0e0]">
                    <!-- Line Numbers & Code -->
                    <div class="table w-full">
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >1</span
                            >
                            <span class="table-cell">
                                <span class="text-purple-400">const</span>
                                <span class="text-yellow-400">sendMail</span> =
                                <span class="text-purple-400">async</span>
                                (<span class="text-blue-400">{`{ message }`}</span>)
                                <span class="text-purple-400">=&gt;</span>
                                {`{`}
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >2</span
                            >
                            <span class="table-cell pl-4">
                                <span class="text-purple-400">await</span>
                                <span class="text-green-400">openMailer</span>({`{`}
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >3</span
                            >
                            <span class="table-cell pl-8">
                                <span class="text-blue-300">to</span>:
                                <span class="text-orange-300">"{SITE_CONFIG.email}"</span>,
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >4</span
                            >
                            <span class="table-cell pl-8">
                                <span class="text-blue-300">subject</span>:
                                <span class="text-orange-300">"来自博客的留言"</span>,
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >5</span
                            >
                            <span class="table-cell pl-4">
                                {`});`}
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >6</span
                            >
                            <span class="table-cell">
                                {`};`}
                            </span>
                        </div>
                        <div class="table-row hover:bg-white/5 transition-colors">
                            <span class="table-cell w-12 text-white/20 select-none text-right pr-6"
                                >7</span
                            >
                            <span class="table-cell text-white/30">
                                // Execute function below
                            </span>
                        </div>
                    </div>
                </div>

                <div class="relative px-6 pb-6 text-right">
                    <a
                        href={`mailto:${SITE_CONFIG.email}?subject=${encodeURIComponent('来自博客的留言')}`}
                        class="inline-flex items-center gap-2 bg-primary/20 hover:bg-primary/40 text-primary hover:text-white border border-primary/30 px-6 py-2.5 rounded-lg transition-all font-sans font-medium group/btn shadow-[0_0_20px_-5px_rgba(var(--color-primary),0.3)] hover:shadow-[0_0_30px_-5px_rgba(var(--color-primary),0.5)]"
                    >
                        <IconMail class="w-4 h-4 group-hover/btn:rotate-12 transition-transform" />
                        {SITE_CONFIG.ui.guestbook.runButton}
                    </a>
                </div>
            </div>

            <!-- Giscus Comments (React Component Implementation) -->
            <div class="space-y-6 mt-12 relative">
                <h2 class="text-2xl font-bold flex items-center gap-3 text-white/90">
                    <span class="text-accent animate-pulse">#</span>
                    {SITE_CONFIG.ui.guestbook.discussionTitle}
                    <span class="text-xs font-mono text-text-secondary/70 tracking-widest"
                        >{SITE_CONFIG.ui.guestbook.discussionLabel}</span
                    >
                </h2>

                <div
                    class="relative bg-surface/20 backdrop-blur-2xl border border-white/5 rounded-3xl p-6 md:p-8 min-h-[200px]"
                >
                    <!-- Decorative Corner -->
                    <div
                        class="absolute top-0 right-0 w-16 h-16 border-t border-r border-white/10 rounded-tr-3xl"
                    >
                    </div>
                    <div
                        class="absolute bottom-0 left-0 w-16 h-16 border-b border-l border-white/10 rounded-bl-3xl"
                    >
                    </div>

                    <GiscusComments client:only="react" />
                </div>
            </div>
        </div>
    </div>
</Layout>
